#N canvas 340 46 853 622 12;
#X obj 237 47 r playhead;
#X obj 375 97 unpack f;
#X msg 375 280 tempo \$1 permin;
#X obj 147 60 inlet;
#X obj 147 160 wrap;
#X msg 147 185 1 \$1;
#X obj 147 210 -;
#X obj 120 260 moses;
#X obj 47 35 loadbang;
#X msg 47 60 args 0;
#X obj 47 85 pdcontrol;
#X obj 47 110 pack 0.1;
#X obj 237 97 unpack f;
#X obj 237 159 change;
#X obj 237 209 wrap;
#X msg 188 372 1 \$1;
#X obj 188 397 -;
#X obj 188 453 f, f 15;
#X obj 188 423 delay;
#X obj 188 321 spigot 1;
#X obj 188 346 t f b, f 8;
#X msg 307 331 0;
#X msg 188 503 \$1 1;
#X text 86 502 tick messages;
#X obj 375 381 t a a;
#X msg 222 285 1;
#N canvas 0 30 450 300 roundUp 1;
#X obj 92 45 inlet;
#X obj 92 95 int;
#X obj 92 120 outlet;
#X obj 92 70 + 0.999999;
#X connect 0 0 3 0 empty;
#X connect 1 0 2 0 empty;
#X connect 3 0 1 0 empty;
#X restore 188 478 pd roundUp;
#N canvas 171 62 615 636 playInitTick 1;
#X obj 263 54 inlet;
#X obj 65 54 inlet;
#X obj 118 460 wrap;
#X msg 118 485 1 \$1;
#X obj 118 510 -;
#X obj 65 535 pack f f;
#X obj 65 560 outlet;
#X text 35 14 position messages (float only), f 17;
#X text 260 14 change-filtered playing flag, f 15;
#X text 132 54 "buddy" logic;
#X msg 173 125 1;
#X obj 151 161 |, f 8;
#X obj 151 186 t f f;
#X obj 65 287 f, f 5;
#X obj 65 79 t b f;
#X msg 124 125 2;
#X obj 151 236 t b b, f 10;
#X msg 253 186 0;
#X obj 263 79 t b f f;
#X obj 65 375 spigot, f 32;
#X obj 65 312 t f f, f 26;
#X obj 65 400 t f f, f 8;
#X text 341 182 1 buddy (must get both play flag and beat counter before proceeding) \; 2 Pack play flag and time into "playAtBeat" message \; 3 Calculate time to next beat and generate partial-beat tick message., f 30;
#X obj 151 211 select 3;
#X connect 0 0 18 0 empty;
#X connect 1 0 14 0 empty;
#X connect 2 0 3 0 empty;
#X connect 3 0 4 0 empty;
#X connect 4 0 5 1 empty;
#X connect 5 0 6 0 empty;
#X connect 10 0 11 0 empty;
#X connect 11 0 12 0 empty;
#X connect 12 0 23 0 empty;
#X connect 12 1 11 1 empty;
#X connect 13 0 20 0 empty;
#X connect 14 0 15 0 empty;
#X connect 14 1 13 1 empty;
#X connect 15 0 11 0 empty;
#X connect 16 0 13 0 empty;
#X connect 16 1 17 0 empty;
#X connect 17 0 11 1 empty;
#X connect 18 0 10 0 empty;
#X connect 18 1 19 1 empty;
#X connect 19 0 21 0 empty;
#X connect 20 0 19 0 empty;
#X connect 21 0 5 0 empty;
#X connect 21 1 2 0 empty;
#X connect 23 0 16 0 empty;
#X restore 364 478 pd playInitTick;
#X f 25;
#X obj 237 122 t f f, f 13;
#X obj 237 72 route position bpm playing, f 63;
#X obj 515 97 t f a, f 11;
#X obj 515 122 change;
#X obj 237 184 t f f, f 8;
#X obj 375 122 change -1;
#X obj 375 147 t f f, f 9;
#X text 445 225 send tempo upon play start, f 15;
#X obj 403 235 f 120;
#X obj 544 197 select 1;
#N canvas 738 241 450 300 handleIn 1;
#X obj 37 37 inlet;
#X obj 37 62 route debug;
#X obj 41 206 outlet;
#X obj 107 206 outlet;
#X connect 0 0 1 0 empty;
#X connect 1 0 3 0 empty;
#X connect 1 1 2 0 empty;
#X restore 147 85 pd handleIn;
#X obj 273 423 spigot 1;
#X obj 320 889 moses, f 30;
#X obj 320 820 t a a, f 16;
#X obj 320 845 unpack 0;
#X obj 376 1048 s \$0-prio;
#X obj 320 1019 outlet;
#N canvas 132 29 450 382 delay-and-out 1;
#X obj 64 60 inlet;
#X text 42 27 time to delay;
#X obj 240 60 inlet;
#X text 197 27 list to delay;
#X obj 166 257 list store, f 11;
#X obj 166 282 outlet;
#X obj 118 60 r \$0-tempo;
#X obj 64 110 delay;
#X obj 64 135 t b b b, f 15;
#X obj 115 160 s \$0-checktime;
#X text 224 160 update "now";
#X msg 64 160 top;
#X obj 64 185 s \$0-prio;
#X text 61 207 check next;
#X text 127 308 must output first \, otherwise this list gets overwritten, f 30;
#X connect 0 0 7 0 empty;
#X connect 2 0 4 1 empty;
#X connect 4 0 5 0 empty;
#X connect 6 0 7 0 empty;
#X connect 7 0 8 0 empty;
#X connect 8 0 11 0 empty;
#X connect 8 1 9 0 empty;
#X connect 8 2 4 0 empty;
#X connect 11 0 12 0 empty;
#X restore 320 969 pd delay-and-out;
#X obj 320 944 -, f 25;
#X text 622 861 pass thru messages up to (not including) tick time + interval, f 22;
#X text 445 969 delay time = event time - tick time;
#X obj 184 669 s \$0-tempo;
#X obj 184 619 list prepend tempo;
#X obj 184 644 list trim;
#X text 160 766 "now" is last tick \; output vs last time \; then posttick and re-tick, f 21;
#X obj 321 638 t b b, f 30;
#X msg 511 703 0;
#X msg 321 671 clear;
#X obj 320 994 t a b, f 11;
#X obj 184 575 route tempo clear, f 42;
#X obj 474 918 r \$0-elapsed;
#X obj 529 823 r \$0-end-of-slice;
#N canvas 218 29 450 300 handle-tick 1;
#X obj 43 28 inlet;
#X text 91 28 tick: tickTime tickLength;
#X obj 213 78 +;
#X obj 299 78 unpack 0;
#X obj 299 103 value \$0-now;
#X obj 43 53 t b b a a, f 37;
#N canvas 57 421 450 300 postticktime 1;
#X obj 49 50 inlet;
#X text 29 26 bang reset;
#X obj 159 50 r \$0-checktime;
#X text 190 26 bang;
#X obj 298 50 r \$0-tempo;
#X obj 81 134 timer;
#X obj 81 159 t f b f, f 33;
#X obj 309 184 outlet;
#X text 309 210 offset;
#X obj 195 184 value \$0-now;
#X obj 81 209 +, f 16;
#X obj 81 234 outlet;
#X text 55 257 real elapsed;
#X obj 49 75 t b b;
#X msg 49 100 0;
#X connect 0 0 13 0 empty;
#X connect 2 0 5 1 empty;
#X connect 4 0 5 0 empty;
#X connect 5 0 6 0 empty;
#X connect 6 0 10 0 empty;
#X connect 6 1 9 0 empty;
#X connect 6 2 7 0 empty;
#X connect 9 0 10 1 empty;
#X connect 10 0 11 0 empty;
#X connect 13 0 14 0 empty;
#X connect 13 1 5 0 empty;
#X connect 14 0 6 0 empty;
#X restore 128 153 pd postticktime;
#X msg 43 178 top;
#X obj 128 178 s \$0-elapsed;
#X obj 213 128 s \$0-end-of-slice;
#X obj 43 203 s \$0-prio;
#X connect 0 0 5 0 empty;
#X connect 2 0 9 0 empty;
#X connect 3 0 4 0 empty;
#X connect 5 0 7 0 empty;
#X connect 5 1 6 0 empty;
#X connect 5 2 2 0 empty;
#X connect 5 3 3 0 empty;
#X connect 6 0 8 0 empty;
#X connect 7 0 10 0 empty;
#X restore 458 606 pd handle-tick;
#X obj 320 781 spigot 1, f 24;
#X text 560 747 moderate hack: "pop" returns data but we don't need to process it below this point \, suppress only for "pop", f 29;
#X obj 515 159 t f f, f 7;
#X text 413 23 Created by James Harkins for plugdata;
#N canvas 0 22 450 300 prioqueue 1;
#X obj 76 59 inlet;
#X obj 509 59 text define \$0-t;
#N canvas 430 29 613 622 push 1;
#X obj 49 45 inlet;
#X text 105 45 list: time msg;
#X obj 49 70 list trim;
#X text 266 14 1 search for -1 \; 2 If not found \, get text size for index \; 3 Text set with full list passed in \; 4 Return time + index;
#X obj 249 145 text search \$0-t;
#X obj 249 170 select -1, f 16;
#X msg 249 120 -1;
#X text 285 120 "-1" = empty line tag;
#X text 374 170 "-1" = search failed result;
#X obj 249 195 text size \$0-t;
#X obj 149 341 text set \$0-t;
#X obj 49 438 pack f f, f 16;
#X obj 49 463 outlet;
#X obj 49 95 t a a b, f 29;
#X obj 292 283 t f f;
#X obj 49 413 unpack f;
#X connect 0 0 2 0 empty;
#X connect 2 0 13 0 empty;
#X connect 4 0 5 0 empty;
#X connect 5 0 9 0 empty;
#X connect 5 1 14 0 empty;
#X connect 6 0 4 0 empty;
#X connect 9 0 14 0 empty;
#X connect 11 0 12 0 empty;
#X connect 13 0 15 0 empty;
#X connect 13 1 10 0 empty;
#X connect 13 2 6 0 empty;
#X connect 14 0 10 1 empty;
#X connect 14 1 11 1 empty;
#X connect 15 0 11 0 empty;
#X restore 76 109 pd push;
#X msg 76 134 push \$1 \$2;
#X msg 166 134 pop;
#X obj 76 84 route push pop top topPrio clear debug, f 78;
#X obj 166 292 list prepend;
#X obj 166 159 t a a;
#X obj 347 134 t b b;
#X msg 257 134 top;
#X msg 347 159 top;
#X msg 379 159 topPrio;
#X obj 304 367 unpack f;
#X obj 166 564 outlet;
#N canvas 428 47 450 380 getMsg 1;
#X obj 28 35 inlet;
#X text 83 35 text index \, flag 1 = delete \, 0 = don't;
#X obj 28 60 unpack f 1, f 24;
#X obj 140 225 spigot 1;
#X obj 74 110 text get \$0-t;
#X obj 28 225 list, f 7;
#X obj 28 85 t b f f;
#X obj 140 250 t b f;
#X obj 140 300 text set \$0-t;
#X msg 140 275 -1;
#X obj 28 250 outlet;
#X connect 0 0 2 0 empty;
#X connect 2 0 6 0 empty;
#X connect 2 1 3 1 empty;
#X connect 3 0 7 0 empty;
#X connect 4 0 5 1 empty;
#X connect 5 0 10 0 empty;
#X connect 6 0 5 0 empty;
#X connect 6 1 3 0 empty;
#X connect 6 2 4 0 empty;
#X connect 7 0 9 0 empty;
#X connect 7 1 8 1 empty;
#X connect 9 0 8 0 empty;
#X restore 166 458 pd getMsg;
#X obj 166 367 unpack f f;
#X msg 166 409 \$1 1;
#X obj 438 134 t b b, f 7;
#X msg 484 200 -1;
#X obj 484 225 text delete \$0-t;
#X msg 438 159 clear;
#X msg 528 159 debug;
#X obj 445 285 outlet;
#X text 509 284 bang on EOF;
#X obj 166 317 list trim;
#X text 274 486 Usual pd problem: The single stateful object float-heap has only one output path \, but I need to query it from 3 different contexts. Prepend-route "works" but text programming is always going to be better at this. \; \; Never mind \, I'm just complaining.;
#N canvas 198 171 485 436 topcache 1;
#X obj 42 33 inlet;
#X obj 42 297 list store;
#X obj 42 322 route bang;
#X obj 42 387 outlet;
#X obj 109 387 outlet;
#X msg 42 58 bang;
#X obj 109 33 r \$0-updatecache;
#X obj 176 123 unpack f f;
#X obj 243 148 text get \$0-t;
#X obj 243 173 route -1;
#X obj 243 219 t b a;
#X text 275 284 this should never happen;
#X text 176 148 unused;
#X obj 109 81 route bang;
#X obj 275 244 print prioqueue-heap referred to empty line, f 24;
#X connect 0 0 5 0 empty;
#X connect 1 0 2 0 empty;
#X connect 2 0 4 0 empty;
#X connect 2 1 3 0 empty;
#X connect 5 0 1 0 empty;
#X connect 6 0 13 0 empty;
#X connect 7 1 8 0 empty;
#X connect 8 0 9 0 empty;
#X connect 9 0 10 0 empty;
#X connect 9 1 1 1 empty;
#X connect 10 0 1 1 empty;
#X connect 10 1 14 0 empty;
#X connect 13 0 1 1 empty;
#X connect 13 1 7 0 empty;
#X restore 257 159 pd topcache;
#X obj 299 270 s \$0-updatecache;
#X obj 257 184 s \$0-out;
#X obj 89 507 r \$0-out;
#X text 297 284 this should happen automatically for every "top" change, f 20;
#X obj 166 342 route pop topPrio, f 40;
#N canvas 0 22 450 300 float-heap 1;
#X obj 617 126 loadbang;
#X obj 114 126 inlet;
#X obj 631 266 array define \$0-a;
#X msg 631 241 resize 64 \, const 0;
#N canvas 401 29 799 637 push 1;
#X text 456 204 1 If array is full \, double its size \; 2 Add at end \; 3 [until] to swap upward \; 4 Bang on end?;
#X obj 58 18 inlet;
#X text 105 17 2 numbers (priority and value);
#N canvas 445 269 660 388 getIndex 1;
#X obj 62 42 inlet;
#X obj 62 67 t b b, f 21;
#X obj 206 91 array size \$0-a;
#X obj 62 92 value \$0-size;
#X obj 62 151 moses, f 21;
#X obj 206 176 t f b, f 21;
#X obj 350 201 f;
#X obj 206 116 t f f, f 24;
#X obj 350 226 * 2;
#X obj 350 251 array size \$0-a;
#X obj 107 234 t f f;
#X obj 139 259 + 2;
#X obj 139 284 value \$0-size;
#X obj 107 327 outlet;
#X connect 0 0 1 0 empty;
#X connect 1 0 3 0 empty;
#X connect 1 1 2 0 empty;
#X connect 2 0 7 0 empty;
#X connect 3 0 4 0 empty;
#X connect 4 0 10 0 empty;
#X connect 4 1 5 0 empty;
#X connect 5 0 10 0 empty;
#X connect 5 1 6 0 empty;
#X connect 6 0 8 0 empty;
#X connect 7 0 4 1 empty;
#X connect 7 1 6 1 empty;
#X connect 8 0 9 0 empty;
#X connect 10 0 13 0 empty;
#X connect 10 1 11 0 empty;
#X connect 11 0 12 0 empty;
#X restore 545 77 pd getIndex;
#X obj 423 152 array set \$0-a;
#X obj 179 152 f;
#X obj 545 102 t f f;
#X obj 179 116 until;
#X text 371 389 compare parent > this \; if true \, swap;
#X obj 58 52 t b b a a b, f 70;
#X obj 211 91 r \$0-stop-up;
#X obj 348 152 unpack f;
#X obj 225 390 >, f 18;
#X text 132 151 index;
#X obj 373 478 f;
#X obj 225 207 t f f;
#X obj 225 232 - 2;
#X obj 225 257 div 4;
#X obj 225 282 * 2;
#X obj 225 307 t f f;
#X obj 306 478 f;
#X msg 225 340 \$1 1;
#X obj 225 365 array get \$0-a;
#X obj 225 415 select 0 1;
#X obj 179 479 s \$0-stop-up;
#X obj 179 182 moses 1;
#X msg 179 207 bang;
#X obj 214 152 r \$0-parent;
#X obj 306 453 t b b, f 10;
#X obj 306 503 t f f;
#X obj 306 628 s \$0-parent;
#X obj 58 554 outlet;
#N canvas 0 0 450 300 swap2 1;
#X obj 59 40 inlet;
#X obj 59 65 t f f;
#X obj 90 90 + 1;
#X obj 59 156 pack f f f f, f 14;
#X obj 122 40 inlet;
#X obj 122 65 t f f;
#X obj 153 90 + 1;
#X msg 59 181 \$2 \$4 \, \$1 \$3;
#N canvas 0 22 450 300 array-swap 1;
#X obj 65 43 inlet;
#X obj 199 43 inlet;
#X obj 291 43 inlet;
#X obj 213 224 array get \$1;
#X obj 65 68 unpack f f;
#X obj 195 317 f;
#X obj 181 158 t f f;
#X obj 317 148 loadbang;
#X msg 317 173 1;
#X obj 291 68 s \$0-name;
#X obj 236 158 r \$0-name;
#X obj 227 259 r \$0-name;
#X obj 181 133 f;
#X obj 65 93 t b f f b;
#X obj 56 233 array get \$0-arrswap;
#X obj 56 342 array set \$0-a;
#X obj 195 342 array set \$0-a;
#X connect 0 0 4 0 empty;
#X connect 1 0 12 1 empty;
#X connect 2 0 9 0 empty;
#X connect 3 0 5 1 empty;
#X connect 4 0 13 0 empty;
#X connect 4 1 12 1 empty;
#X connect 5 0 16 0 empty;
#X connect 6 0 15 1 empty;
#X connect 6 1 3 0 empty;
#X connect 7 0 8 0 empty;
#X connect 8 0 3 1 empty;
#X connect 8 0 14 1 empty;
#X connect 10 0 3 2 empty;
#X connect 10 0 14 2 empty;
#X connect 11 0 15 2 empty;
#X connect 11 0 16 2 empty;
#X connect 12 0 6 0 empty;
#X connect 13 0 5 0 empty;
#X connect 13 1 14 0 empty;
#X connect 13 2 16 1 empty;
#X connect 13 3 12 0 empty;
#X connect 14 0 15 0 empty;
#X restore 59 228 pd array-swap \$0-a;
#X connect 0 0 1 0 empty;
#X connect 1 0 3 0 empty;
#X connect 1 1 2 0 empty;
#X connect 2 0 3 1 empty;
#X connect 3 0 7 0 empty;
#X connect 4 0 5 0 empty;
#X connect 5 0 3 2 empty;
#X connect 5 1 6 0 empty;
#X connect 6 0 3 3 empty;
#X connect 7 0 8 0 empty;
#X restore 338 528 pd swap2;
#X connect 1 0 9 0 empty;
#X connect 3 0 6 0 empty;
#X connect 5 0 25 0 empty;
#X connect 6 0 5 1 empty;
#X connect 6 1 4 1 empty;
#X connect 7 0 5 0 empty;
#X connect 9 0 31 0 empty;
#X connect 9 1 7 0 empty;
#X connect 9 2 11 0 empty;
#X connect 9 3 4 0 empty;
#X connect 9 4 3 0 empty;
#X connect 10 0 7 1 empty;
#X connect 11 0 12 1 empty;
#X connect 12 0 23 0 empty;
#X connect 14 0 32 1 empty;
#X connect 15 0 16 0 empty;
#X connect 15 1 14 1 empty;
#X connect 16 0 17 0 empty;
#X connect 17 0 18 0 empty;
#X connect 18 0 19 0 empty;
#X connect 19 0 21 0 empty;
#X connect 19 1 20 1 empty;
#X connect 20 0 29 0 empty;
#X connect 21 0 22 0 empty;
#X connect 22 0 12 0 empty;
#X connect 23 0 24 0 empty;
#X connect 23 1 28 0 empty;
#X connect 25 0 26 0 empty;
#X connect 25 1 15 0 empty;
#X connect 26 0 24 0 empty;
#X connect 27 0 5 1 empty;
#X connect 28 0 20 0 empty;
#X connect 28 1 14 0 empty;
#X connect 29 0 30 0 empty;
#X connect 29 1 32 0 empty;
#X restore 114 176 pd push;
#X obj 529 190 r \$0-reset;
#X msg 580 271 0;
#X obj 580 296 value \$0-size;
#X obj 617 151 s \$0-reset;
#X msg 290 176 bang;
#X obj 290 201 s \$0-reset;
#X obj 114 151 route push pop top clear debug, f 44;
#X msg 358 346 0;
#X obj 358 371 array get \$0-a;
#X obj 110 425 outlet;
#N canvas 456 29 709 638 pop 1;
#X text 374 545 1 Save output list \; 2 Move tail 2 up to 0 \; 3 Loop: check lesser of children \; if lesser is less than promoted prio \, swap \; 4 Bang output;
#X obj 48 33 inlet;
#X msg 486 464 0 2;
#X obj 486 489 array get \$0-a;
#X obj 48 575 outlet;
#X obj 48 550 list;
#N canvas 468 133 450 445 moveUp 1;
#X obj 40 53 inlet;
#X text 222 26 decrement size by 2 \; get there \, set 0;
#X msg 40 78 bang;
#X obj 40 103 value \$0-size;
#X obj 85 153 - 2;
#X msg 85 231 \$1 2;
#X obj 85 178 t f f;
#X obj 117 203 value \$0-size;
#X obj 40 128 moses 2;
#X obj 26 354 outlet;
#X obj 78 354 outlet;
#X obj 85 281 t a a b;
#X msg 227 329 0;
#X obj 180 354 array set \$0-a;
#X obj 85 256 array get \$0-a;
#X msg 40 153 bang;
#X connect 0 0 2 0 empty;
#X connect 2 0 3 0 empty;
#X connect 3 0 8 0 empty;
#X connect 4 0 6 0 empty;
#X connect 5 0 14 0 empty;
#X connect 6 0 5 0 empty;
#X connect 6 1 7 0 empty;
#X connect 8 0 15 0 empty;
#X connect 8 1 4 0 empty;
#X connect 11 0 9 0 empty;
#X connect 11 1 13 0 empty;
#X connect 11 2 12 0 empty;
#X connect 12 0 13 1 empty;
#X connect 14 0 11 0 empty;
#X connect 15 0 10 0 empty;
#X restore 194 97 pd moveUp;
#X obj 254 575 outlet;
#X obj 254 122 t b b;
#X msg 286 153 0;
#X obj 48 58 t b b b b, f 63;
#X msg 340 153 1;
#X obj 48 208 spigot;
#X text 270 203 if nothing to return \, block the rest of the logic, f 23;
#N canvas 328 42 607 639 pushDown 1;
#X obj 41 33 inlet;
#X obj 236 33 inlet;
#X text 327 52 R inlet is "moving" pair \; start at index 0 \; get 2 children prio \; which is lesser? \; then compare that to "moving" \; if lesser child < moving \, swap \; else stop;
#X obj 236 58 unpack f;
#X obj 192 401 <, f 20;
#X obj 41 58 t b b, f 11;
#X msg 115 83 0;
#X obj 41 182 f, f 11;
#X obj 41 148 until;
#X obj 73 123 r \$0-stop-down;
#N canvas 456 77 753 564 lesserIndex 1;
#X obj 37 22 inlet;
#X obj 37 47 t f b, f 45;
#X obj 349 72 value \$0-size;
#X obj 37 72 * 2;
#X obj 37 507 outlet;
#X msg 349 459 bang;
#X obj 37 460 f, f 13;
#X obj 212 460 f, f 13;
#X obj 37 97 + 2;
#X obj 349 97 t f f;
#X text 429 116 logic should be \; 1 check i * 2 + 2 vs size \; 2 if >= \, send bang and stop \; 3 else \, get from array \; 4 + another 2 and check vs size \; 5 if >= \, send first index and stop \; 6 else compare;
#X text 215 493 i*2 + 2;
#X obj 37 122 moses, f 45;
#X obj 37 147 t f f f, f 35;
#X msg 158 173 \$1 1;
#X obj 158 198 array get \$0-a;
#X obj 37 370 >=;
#X obj 37 395 select 0 1;
#X obj 37 198 + 2;
#X obj 37 223 moses, f 41;
#X msg 307 373 bang;
#X msg 37 274 \$1 1;
#X obj 37 299 array get \$0-a;
#X obj 37 248 t f f, f 23;
#X connect 0 0 1 0 empty;
#X connect 1 0 3 0 empty;
#X connect 1 1 2 0 empty;
#X connect 2 0 9 0 empty;
#X connect 3 0 8 0 empty;
#X connect 5 0 4 0 empty;
#X connect 6 0 4 0 empty;
#X connect 7 0 4 0 empty;
#X connect 8 0 12 0 empty;
#X connect 9 0 12 1 empty;
#X connect 9 1 19 1 empty;
#X connect 12 0 13 0 empty;
#X connect 12 1 5 0 empty;
#X connect 13 0 18 0 empty;
#X connect 13 1 14 0 empty;
#X connect 13 2 7 1 empty;
#X connect 14 0 15 0 empty;
#X connect 15 0 16 1 empty;
#X connect 16 0 17 0 empty;
#X connect 17 0 6 0 empty;
#X connect 17 1 7 0 empty;
#X connect 18 0 19 0 empty;
#X connect 19 0 23 0 empty;
#X connect 19 1 20 0 empty;
#X connect 20 0 7 0 empty;
#X connect 21 0 22 0 empty;
#X connect 22 0 16 0 empty;
#X connect 23 0 21 0 empty;
#X connect 23 1 6 1 empty;
#X restore 41 242 pd lesserIndex;
#X obj 41 301 route bang, f 22;
#X obj 41 326 s \$0-stop-down;
#X obj 192 326 t f f;
#X msg 192 351 \$1 1;
#X obj 192 376 array get \$0-a;
#X obj 192 426 select 0 1, f 15;
#X obj 41 207 t f f, f 64;
#X obj 243 507 f, f 21;
#X obj 275 481 f, f 30;
#X obj 243 455 t b b;
#N canvas 0 0 450 380 swap2 1;
#X obj 59 7 inlet;
#X obj 59 65 t f f;
#X obj 90 90 + 1;
#X obj 59 156 pack f f f f, f 14;
#X obj 122 40 inlet;
#X obj 122 65 t f f;
#X obj 153 90 + 1;
#X msg 59 181 \$2 \$4 \, \$1 \$3;
#X obj 59 32 t b f;
#X msg 42 248 0;
#X obj 42 273 array get \$0-a;
#N canvas 0 22 450 300 array-swap 1;
#X obj 65 43 inlet;
#X obj 199 43 inlet;
#X obj 291 43 inlet;
#X obj 213 224 array get \$1;
#X obj 56 342 array set \$1;
#X obj 195 342 array set \$1;
#X obj 65 68 unpack f f;
#X obj 195 317 f;
#X obj 181 158 t f f;
#X obj 317 148 loadbang;
#X msg 317 173 1;
#X obj 56 224 array get \$1;
#X obj 291 68 s \$0-name;
#X obj 236 158 r \$0-name;
#X obj 227 259 r \$0-name;
#X obj 181 133 f;
#X obj 65 93 t b f f b;
#X connect 0 0 6 0 empty;
#X connect 1 0 15 1 empty;
#X connect 2 0 12 0 empty;
#X connect 3 0 7 1 empty;
#X connect 6 0 16 0 empty;
#X connect 6 1 15 1 empty;
#X connect 7 0 5 0 empty;
#X connect 8 0 4 1 empty;
#X connect 8 1 3 0 empty;
#X connect 9 0 10 0 empty;
#X connect 10 0 3 1 empty;
#X connect 10 0 11 1 empty;
#X connect 11 0 4 0 empty;
#X connect 13 0 3 2 empty;
#X connect 13 0 11 2 empty;
#X connect 14 0 5 2 empty;
#X connect 14 0 4 2 empty;
#X connect 15 0 8 0 empty;
#X connect 16 0 7 0 empty;
#X connect 16 1 11 0 empty;
#X connect 16 2 5 1 empty;
#X connect 16 3 15 0 empty;
#X restore 140 233 pd array-swap \$0-a;
#X connect 0 0 8 0 empty;
#X connect 1 0 3 0 empty;
#X connect 1 1 2 0 empty;
#X connect 2 0 3 1 empty;
#X connect 3 0 7 0 empty;
#X connect 4 0 5 0 empty;
#X connect 5 0 3 2 empty;
#X connect 5 1 6 0 empty;
#X connect 6 0 3 3 empty;
#X connect 7 0 11 0 empty;
#X connect 8 0 9 0 empty;
#X connect 8 1 1 0 empty;
#X connect 9 0 10 0 empty;
#X restore 243 541 pd swap2;
#X obj 192 580 s \$0-stop-down;
#X msg 41 83 10;
#X obj 41 267 t a f, f 50;
#X connect 0 0 5 0 empty;
#X connect 1 0 3 0 empty;
#X connect 3 0 4 1 empty;
#X connect 4 0 16 0 empty;
#X connect 5 0 23 0 empty;
#X connect 5 1 6 0 empty;
#X connect 6 0 7 1 empty;
#X connect 7 0 17 0 empty;
#X connect 8 0 7 0 empty;
#X connect 9 0 8 1 empty;
#X connect 10 0 24 0 empty;
#X connect 11 0 12 0 empty;
#X connect 11 1 13 0 empty;
#X connect 13 0 14 0 empty;
#X connect 13 1 7 1 empty;
#X connect 14 0 15 0 empty;
#X connect 15 0 4 0 empty;
#X connect 16 0 22 0 empty;
#X connect 16 1 20 0 empty;
#X connect 17 0 10 0 empty;
#X connect 17 1 19 1 empty;
#X connect 18 0 21 0 empty;
#X connect 19 0 21 1 empty;
#X connect 20 0 18 0 empty;
#X connect 20 1 19 0 empty;
#X connect 23 0 8 0 empty;
#X connect 24 0 11 0 empty;
#X connect 24 1 18 1 empty;
#X restore 80 297 pd pushDown;
#X obj 48 233 t b b;
#X obj 283 285 r enablepushdown;
#X obj 80 262 spigot 1;
#X connect 1 0 10 0 empty;
#X connect 2 0 3 0 empty;
#X connect 3 0 5 1 empty;
#X connect 5 0 4 0 empty;
#X connect 6 0 14 1 empty;
#X connect 6 1 8 0 empty;
#X connect 8 0 7 0 empty;
#X connect 8 1 9 0 empty;
#X connect 9 0 12 1 empty;
#X connect 10 0 12 0 empty;
#X connect 10 1 6 0 empty;
#X connect 10 2 11 0 empty;
#X connect 10 3 2 0 empty;
#X connect 11 0 12 1 empty;
#X connect 12 0 15 0 empty;
#X connect 15 0 5 0 empty;
#X connect 15 1 17 0 empty;
#X connect 16 0 17 1 empty;
#X connect 17 0 14 0 empty;
#X restore 175 176 pd pop;
#X obj 358 321 t b b, f 18;
#X obj 481 346 value \$0-size;
#X msg 481 371 size = \$1;
#X obj 276 425 outlet;
#X obj 421 425 print;
#N canvas 115 271 450 300 top 1;
#X obj 52 43 inlet;
#X msg 52 68 bang;
#X obj 52 93 value \$0-size;
#X obj 52 118 moses 2, f 20;
#X obj 189 167 array get \$0-a;
#X msg 189 143 0 2;
#X obj 52 247 outlet;
#X msg 52 143 bang;
#X obj 189 247 outlet;
#X connect 0 0 1 0 empty;
#X connect 1 0 2 0 empty;
#X connect 2 0 3 0 empty;
#X connect 3 0 7 0 empty;
#X connect 3 1 5 0 empty;
#X connect 4 0 6 0 empty;
#X connect 5 0 4 0 empty;
#X connect 7 0 8 0 empty;
#X restore 236 242 pd top;
#X obj 174 425 outlet;
#X text 105 447 top/pop result, f 8;
#X text 175 447 new top after change, f 12;
#X text 276 447 bang on empty, f 7;
#N canvas 115 271 450 300 topChange 1;
#X obj 52 43 inlet;
#X msg 52 68 bang;
#X obj 52 93 value \$0-size;
#X obj 52 118 moses 2, f 20;
#X obj 189 167 array get \$0-a;
#X msg 189 143 0 2;
#X obj 52 247 outlet;
#X msg 52 143 bang;
#X obj 189 247 outlet;
#X connect 0 0 1 0 empty;
#X connect 1 0 2 0 empty;
#X connect 2 0 3 0 empty;
#X connect 3 0 7 0 empty;
#X connect 3 1 5 0 empty;
#X connect 4 0 6 0 empty;
#X connect 5 0 4 0 empty;
#X connect 7 0 8 0 empty;
#X restore 114 242 pd topChange;
#X obj 175 201 t a b;
#X obj 529 215 t b b b, f 15;
#X connect 0 0 8 0 empty;
#X connect 1 0 11 0 empty;
#X connect 3 0 2 0 empty;
#X connect 4 0 26 0 empty;
#X connect 5 0 28 0 empty;
#X connect 6 0 7 0 empty;
#X connect 9 0 10 0 empty;
#X connect 11 0 4 0 empty;
#X connect 11 1 15 0 empty;
#X connect 11 2 21 0 empty;
#X connect 11 3 9 0 empty;
#X connect 11 4 16 0 empty;
#X connect 12 0 13 0 empty;
#X connect 13 0 20 0 empty;
#X connect 15 0 27 0 empty;
#X connect 15 1 19 0 empty;
#X connect 16 0 12 0 empty;
#X connect 16 1 17 0 empty;
#X connect 17 0 18 0 empty;
#X connect 18 0 20 0 empty;
#X connect 21 0 14 0 empty;
#X connect 21 1 19 0 empty;
#X connect 26 0 22 0 empty;
#X connect 26 1 22 0 empty;
#X connect 27 0 14 0 empty;
#X connect 27 1 26 0 empty;
#X connect 28 0 22 0 empty;
#X connect 28 1 6 0 empty;
#X connect 28 2 3 0 empty;
#X restore 170 230 pd float-heap;
#X f 42;
#X connect 0 0 5 0 empty;
#X connect 2 0 3 0 empty;
#X connect 3 0 32 0 empty;
#X connect 4 0 7 0 empty;
#X connect 5 0 2 0 empty;
#X connect 5 1 4 0 empty;
#X connect 5 2 9 0 empty;
#X connect 5 3 8 0 empty;
#X connect 5 4 17 0 empty;
#X connect 5 5 21 0 empty;
#X connect 6 0 24 0 empty;
#X connect 7 0 32 0 empty;
#X connect 7 1 6 1 empty;
#X connect 8 0 10 0 empty;
#X connect 8 1 11 0 empty;
#X connect 9 0 26 0 empty;
#X connect 10 0 32 0 empty;
#X connect 11 0 6 1 empty;
#X connect 12 0 13 0 empty;
#X connect 14 0 13 0 empty;
#X connect 15 1 16 0 empty;
#X connect 16 0 14 0 empty;
#X connect 17 0 20 0 empty;
#X connect 17 1 18 0 empty;
#X connect 18 0 19 0 empty;
#X connect 20 0 32 0 empty;
#X connect 21 0 32 0 empty;
#X connect 24 0 31 0 empty;
#X connect 26 0 28 0 empty;
#X connect 26 1 22 0 empty;
#X connect 29 0 13 0 empty;
#X connect 31 0 15 0 empty;
#X connect 31 1 12 0 empty;
#X connect 32 0 6 0 empty;
#X connect 32 1 27 0 empty;
#X connect 32 2 22 0 empty;
#X restore 320 748 pd prioqueue;
#X msg 376 1023 pop;
#X obj 218 918 print;
#X obj 118 624 print;
#X obj 575 881 print;
#N canvas 0 0 450 300 0-prio-feedback 1;
#X obj 58 38 r \$0-prio;
#X obj 58 63 route pop, f 20;
#X obj 195 88 t a b;
#X msg 226 113 1;
#X msg 104 113 0;
#X obj 58 216 outlet;
#X obj 149 216 outlet;
#X obj 58 88 t b b, f 7;
#X msg 58 113 pop;
#X connect 0 0 1 0 empty;
#X connect 1 0 7 0 empty;
#X connect 1 1 2 0 empty;
#X connect 2 0 5 0 empty;
#X connect 2 1 3 0 empty;
#X connect 3 0 6 0 empty;
#X connect 4 0 6 0 empty;
#X connect 7 0 8 0 empty;
#X connect 7 1 4 0 empty;
#X connect 8 0 5 0 empty;
#X restore 363 703 pd 0-prio-feedback;
#X connect 0 0 29 0 empty;
#X connect 1 0 33 0 empty;
#X connect 2 0 24 0 empty;
#X connect 3 0 38 0 empty;
#X connect 4 0 5 0 empty;
#X connect 5 0 6 0 empty;
#X connect 6 0 7 1 empty;
#X connect 7 0 25 0 empty;
#X connect 7 1 19 0 empty;
#X connect 8 0 9 0 empty;
#X connect 9 0 10 0 empty;
#X connect 10 0 11 0 empty;
#X connect 11 0 4 0 empty;
#X connect 12 0 28 0 empty;
#X connect 13 0 32 0 empty;
#X connect 14 0 7 0 empty;
#X connect 15 0 16 0 empty;
#X connect 16 0 18 0 empty;
#X connect 17 0 26 0 empty;
#X connect 18 0 17 0 empty;
#X connect 19 0 20 0 empty;
#X connect 20 0 15 0 empty;
#X connect 20 1 21 0 empty;
#X connect 21 0 19 1 empty;
#X connect 21 0 39 1 empty;
#X connect 22 0 57 0 empty;
#X connect 24 0 57 0 empty;
#X connect 24 1 18 0 empty;
#X connect 25 0 19 1 empty;
#X connect 25 0 39 1 empty;
#X connect 26 0 22 0 empty;
#X connect 27 0 57 0 empty;
#X connect 28 0 13 0 empty;
#X connect 28 1 27 0 empty;
#X connect 29 0 12 0 empty;
#X connect 29 1 1 0 empty;
#X connect 29 2 30 0 empty;
#X connect 30 0 31 0 empty;
#X connect 31 0 63 0 empty;
#X connect 32 0 14 0 empty;
#X connect 32 1 39 0 empty;
#X connect 33 0 34 0 empty;
#X connect 34 0 2 0 empty;
#X connect 34 1 36 1 empty;
#X connect 36 0 2 0 empty;
#X connect 37 0 36 0 empty;
#X connect 38 0 4 0 empty;
#X connect 39 0 17 1 empty;
#X connect 40 0 46 0 empty;
#X connect 41 0 42 0 empty;
#X connect 41 1 45 1 empty;
#X connect 42 0 40 0 empty;
#X connect 45 0 56 0 empty;
#X connect 46 0 45 0 empty;
#X connect 50 0 51 0 empty;
#X connect 51 0 49 0 empty;
#X connect 53 0 55 0 empty;
#X connect 53 1 54 0 empty;
#X connect 54 0 40 1 empty;
#X connect 55 0 65 0 empty;
#X connect 56 0 44 0 empty;
#X connect 56 1 66 0 empty;
#X connect 57 0 50 0 empty;
#X connect 57 1 53 0 empty;
#X connect 57 2 60 0 empty;
#X connect 58 0 46 1 empty;
#X connect 59 0 40 1 empty;
#X connect 61 0 41 0 empty;
#X connect 63 0 27 1 empty;
#X connect 63 1 37 0 empty;
#X connect 65 0 61 0 empty;
#X connect 66 0 43 0 empty;
#X connect 70 0 65 0 empty;
#X connect 70 1 61 1 empty;
